<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AcuteAngleChain: aacio::exchange Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="aac-logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AcuteAngleChain
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>aacio</b></li><li class="navelem"><a class="el" href="classaacio_1_1exchange.html">exchange</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classaacio_1_1exchange-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">aacio::exchange Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="exchange_8hpp_source.html">exchange.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structaacio_1_1exchange_1_1covermargin.html">covermargin</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structaacio_1_1exchange_1_1trade.html">trade</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structaacio_1_1exchange_1_1upmargin.html">upmargin</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a1b32d97f61297d6b7158e9d7d7223928"><td class="memItemLeft" align="right" valign="top"><a id="a1b32d97f61297d6b7158e9d7d7223928"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>exchange</b> (<a class="el" href="structaacio_1_1chain_1_1name.html">account_name</a> self)</td></tr>
<tr class="separator:a1b32d97f61297d6b7158e9d7d7223928"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e10a3d7e1b128f4761a756084e2a95a"><td class="memItemLeft" align="right" valign="top"><a id="a2e10a3d7e1b128f4761a756084e2a95a"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>createx</b> (<a class="el" href="structaacio_1_1chain_1_1name.html">account_name</a> creator, <a class="el" href="structaacio_1_1asset.html">asset</a> initial_supply, uint32_t fee, <a class="el" href="structaacio_1_1extended__asset.html">extended_asset</a> base_deposit, <a class="el" href="structaacio_1_1extended__asset.html">extended_asset</a> quote_deposit)</td></tr>
<tr class="separator:a2e10a3d7e1b128f4761a756084e2a95a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeab7e2fb40b5038b6233a3116765199c"><td class="memItemLeft" align="right" valign="top"><a id="aeab7e2fb40b5038b6233a3116765199c"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>deposit</b> (<a class="el" href="structaacio_1_1chain_1_1name.html">account_name</a> from, <a class="el" href="structaacio_1_1extended__asset.html">extended_asset</a> quantity)</td></tr>
<tr class="separator:aeab7e2fb40b5038b6233a3116765199c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3379e925b8a0d7140a3073484925c06"><td class="memItemLeft" align="right" valign="top"><a id="ad3379e925b8a0d7140a3073484925c06"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>withdraw</b> (<a class="el" href="structaacio_1_1chain_1_1name.html">account_name</a> from, <a class="el" href="structaacio_1_1extended__asset.html">extended_asset</a> quantity)</td></tr>
<tr class="separator:ad3379e925b8a0d7140a3073484925c06"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab76b632bb43f5135773ee3fcd0724afb"><td class="memItemLeft" align="right" valign="top"><a id="ab76b632bb43f5135773ee3fcd0724afb"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>lend</b> (<a class="el" href="structaacio_1_1chain_1_1name.html">account_name</a> lender, <a class="el" href="structaacio_1_1symbol__type.html">symbol_type</a> market, <a class="el" href="structaacio_1_1extended__asset.html">extended_asset</a> quantity)</td></tr>
<tr class="separator:ab76b632bb43f5135773ee3fcd0724afb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6dbd76c9e1a5d5de7ec7b461592d72aa"><td class="memItemLeft" align="right" valign="top"><a id="a6dbd76c9e1a5d5de7ec7b461592d72aa"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>unlend</b> (<a class="el" href="structaacio_1_1chain_1_1name.html">account_name</a> lender, <a class="el" href="structaacio_1_1symbol__type.html">symbol_type</a> market, double interest_shares, <a class="el" href="structaacio_1_1extended__symbol.html">extended_symbol</a> interest_symbol)</td></tr>
<tr class="separator:a6dbd76c9e1a5d5de7ec7b461592d72aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43b2bdac8c60fed94c556f2e06bdfda2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaacio_1_1exchange.html#a43b2bdac8c60fed94c556f2e06bdfda2">on</a> (const <a class="el" href="structaacio_1_1exchange_1_1trade.html">trade</a> &amp;t)</td></tr>
<tr class="separator:a43b2bdac8c60fed94c556f2e06bdfda2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27ed06b661427aca5e67cd9d514e6635"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classaacio_1_1exchange.html#a27ed06b661427aca5e67cd9d514e6635">on</a> (const <a class="el" href="structaacio_1_1exchange_1_1upmargin.html">upmargin</a> &amp;b)</td></tr>
<tr class="separator:a27ed06b661427aca5e67cd9d514e6635"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c73fe32e0b96de00e97b8ec907d4d19"><td class="memItemLeft" align="right" valign="top"><a id="a9c73fe32e0b96de00e97b8ec907d4d19"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>on</b> (const <a class="el" href="structaacio_1_1exchange_1_1covermargin.html">covermargin</a> &amp;b)</td></tr>
<tr class="separator:a9c73fe32e0b96de00e97b8ec907d4d19"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3061d20b476589c40eba76b1bfcca836"><td class="memItemLeft" align="right" valign="top"><a id="a3061d20b476589c40eba76b1bfcca836"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>on</b> (const <a class="el" href="structaacio_1_1currency_1_1transfer.html">currency::transfer</a> &amp;t, <a class="el" href="structaacio_1_1chain_1_1name.html">account_name</a> code)</td></tr>
<tr class="separator:a3061d20b476589c40eba76b1bfcca836"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c305a7b7166e2b892fe11f67ef70452"><td class="memItemLeft" align="right" valign="top"><a id="a4c305a7b7166e2b892fe11f67ef70452"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>apply</b> (<a class="el" href="structaacio_1_1chain_1_1name.html">account_name</a> <a class="el" href="structaacio_1_1contract.html">contract</a>, <a class="el" href="structaacio_1_1chain_1_1name.html">account_name</a> act)</td></tr>
<tr class="separator:a4c305a7b7166e2b892fe11f67ef70452"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This contract enables users to create an exchange between any pair of standard currency types. <a class="el" href="struct_a.html">A</a> new exchange is created by funding it with an equal value of both sides of the order book and giving the issuer the initial shares in that orderbook.</p>
<p>To prevent exessive rounding errors, the initial deposit should include a sizeable quantity of both the base and quote currencies and the exchange shares should have a quantity 100x the quantity of the largest initial deposit.</p>
<p>Users must deposit funds into the exchange before they can trade on the exchange.</p>
<p>Each time an exchange is created a new currency for that exchanges market maker is also created. This currencies supply and symbol must be unique and it uses the currency contract's tables to manage it. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a43b2bdac8c60fed94c556f2e06bdfda2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43b2bdac8c60fed94c556f2e06bdfda2">&#9670;&nbsp;</a></span>on() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void aacio::exchange::on </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structaacio_1_1exchange_1_1trade.html">trade</a> &amp;&#160;</td>
          <td class="paramname"><em>t</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>TODO: if pending order start deferred trx to fill it </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classaacio_1_1exchange_a43b2bdac8c60fed94c556f2e06bdfda2_cgraph.png" border="0" usemap="#classaacio_1_1exchange_a43b2bdac8c60fed94c556f2e06bdfda2_cgraph" alt=""/></div>
<!-- MAP 0 -->
</div>

</div>
</div>
<a id="a27ed06b661427aca5e67cd9d514e6635"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a27ed06b661427aca5e67cd9d514e6635">&#9670;&nbsp;</a></span>on() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void aacio::exchange::on </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structaacio_1_1exchange_1_1upmargin.html">upmargin</a> &amp;&#160;</td>
          <td class="paramname"><em>b</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This action shall fail if it would result in a margin call </p>
<p>if this succeeds then the borrower will see their balances adjusted accordingly, if they don't have sufficient balance to either fund the collateral or pay off the debt then this will fail before we go further. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classaacio_1_1exchange_a27ed06b661427aca5e67cd9d514e6635_cgraph.png" border="0" usemap="#classaacio_1_1exchange_a27ed06b661427aca5e67cd9d514e6635_cgraph" alt=""/></div>
<!-- MAP 1 -->
</div>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>contracts/exchange/<a class="el" href="exchange_8hpp_source.html">exchange.hpp</a></li>
<li>contracts/exchange/exchange.cpp</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
