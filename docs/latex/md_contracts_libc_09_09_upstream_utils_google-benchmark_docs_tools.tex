\subsection*{compare\+\_\+bench.\+py}

The {\ttfamily compare\+\_\+bench.\+py} utility which can be used to compare the result of benchmarks. The program is invoked like\+:


\begin{DoxyCode}
$ compare\_bench.py <old-benchmark> <new-benchmark> [benchmark options]...
\end{DoxyCode}


Where {\ttfamily $<$old-\/benchmark$>$} and {\ttfamily $<$new-\/benchmark$>$} either specify a benchmark executable file, or a J\+S\+ON output file. The type of the input file is automatically detected. If a benchmark executable is specified then the benchmark is run to obtain the results. Otherwise the results are simply loaded from the output file.

The sample output using the J\+S\+ON test files under {\ttfamily Inputs/} gives\+:


\begin{DoxyCode}
$ ./compare\_bench.py ./gbench/Inputs/test1\_run1.json ./gbench/Inputs/test1\_run2.json
Comparing ./gbench/Inputs/test1\_run1.json to ./gbench/Inputs/test1\_run2.json
Benchmark                   Time           CPU
----------------------------------------------
BM\_SameTimes               +0.00         +0.00
BM\_2xFaster                -0.50         -0.50
BM\_2xSlower                +1.00         +1.00
BM\_10PercentFaster         -0.10         -0.10
BM\_10PercentSlower         +0.10         +0.10
\end{DoxyCode}


When a benchmark executable is run, the raw output from the benchmark is printed in real time to stdout. The sample output using {\ttfamily benchmark/basic\+\_\+test} for both arguments looks like\+:


\begin{DoxyCode}
./compare\_bench.py  test/basic\_test test/basic\_test  --benchmark\_filter=BM\_empty.*
RUNNING: test/basic\_test --benchmark\_filter=BM\_empty.*
Run on (4 X 4228.32 MHz CPU s)
2016-08-02 19:21:33
Benchmark                              Time           CPU Iterations
--------------------------------------------------------------------
BM\_empty                               9 ns          9 ns   79545455
BM\_empty/threads:4                     4 ns          9 ns   75268816
BM\_empty\_stop\_start                    8 ns          8 ns   83333333
BM\_empty\_stop\_start/threads:4          3 ns          8 ns   83333332
RUNNING: test/basic\_test --benchmark\_filter=BM\_empty.*
Run on (4 X 4228.32 MHz CPU s)
2016-08-02 19:21:35
Benchmark                              Time           CPU Iterations
--------------------------------------------------------------------
BM\_empty                               9 ns          9 ns   76086957
BM\_empty/threads:4                     4 ns          9 ns   76086956
BM\_empty\_stop\_start                    8 ns          8 ns   87500000
BM\_empty\_stop\_start/threads:4          3 ns          8 ns   88607596
Comparing test/basic\_test to test/basic\_test
Benchmark                              Time           CPU
---------------------------------------------------------
BM\_empty                              +0.00         +0.00
BM\_empty/threads:4                    +0.00         +0.00
BM\_empty\_stop\_start                   +0.00         +0.00
BM\_empty\_stop\_start/threads:4         +0.00         +0.00
\end{DoxyCode}


Obviously this example doesn\textquotesingle{}t give any useful output, but it\textquotesingle{}s intended to show the output format when \textquotesingle{}compare\+\_\+bench.\+py\textquotesingle{} needs to run benchmarks. 